---
title: 比特币点对点数字货币论文 (2008-11-09 01:58:48 UTC)
data: "2021/6/27 20:59:30"
excerpt: "要想让所有人都停留在同一页纸上，唯一的办法就是相信最长链永远是有效的那一个分支，无论发生了什么事。"
tags:
- Satoshi Nakamoto
- Nakamoto Consensus
- Double Spend
- Email
---

*标题：比特币点对点数字货币论文 (2008-11-09 01:58:48 UTC)*

*作者：Satoshi Nakamoto*

*来源：https://satoshi.nakamotoinstitute.org/emails/cryptography/6/*

*译者：阿剑（hongji@ethfans.org）*

---



> Hal Finney:
>
> 即使一笔事务没有广播到所有节点，也是 OK 的……

没错，节点需要把事务保留在工作组内，直到它它们被打包进某个区块。如果一笔事务抵达了 90% 的节点，那么每当挖出一个新区块，该笔事务都有 90% 的概率置身其中。

> 再举一个例子，如果两条乃至多条链都在生长，而链 A 上新到达的区块再次花用了链 B 上已经花过的某个币……

这不需要检测。哪个分支最终变得更长，该分支上的那笔交易就是有效的，而对立的那笔则是无效的。如果某人尝试以这种方式多次花费同一个币，那最终也有且仅有一笔交易时有效的，另一笔则是无效的。

交易的收款方正常情况下只需静待一个小时或更长时间，以待这样的概率事件得以揭晓。他们当然也可以立即花掉收到的币，但其余活动（比如发货）则应等待一段时间。

> 我也不理解多重支付（或者说，取消交易）是怎么做到的……

攻击者不是给链的末端增加区块。TA 要回溯到自己的交易被打包的那个区块，并尝试在该位置重新开始生产区块，以 “撤销” 原区块以及后续的所有区块（包括与此同时，网络中的其他人在原分支上生产的所有区块）。他这是在重写历史。一旦他的分支变得更长，它就会变成新的、有效的一条分支（而原来的分支则会被抛弃）。

这就触及到了一个关键点。即使在场的所有人可能都看到了这个诡计，也没有什么办法。

将最长的链认作有效的链，这条规则是严格必要的。在场的节点也许记得一个先出现的分支被另一个分支取代，但他们没有办法说服那些不在场的人。我们不能任由节点分成派系，各自坚持自己认为先出现的分支，后来才加入的那些节点是什么也看不见因此根本无法判断的。基于 CPU 算力的工作量证明投票必须具有最终决定权。要想让所有人都停留在同一页纸上，唯一的办法就是相信最长链永远是有效的那一个分支，无论发生了什么事。

>  在支付交易中，收款方要检查什么呢？……

收款方只需要验证收到的币可以追溯到区块链条足够深处，就可以了，通常来说只需要追溯前两次的转移即可，所有更早的事务都可以丢弃。

> 时间戳节点会不会检查事务、确保每个币的前一笔事务在链上，从而强制执行链上所有事务都代表有效币的规则？

正是如此。节点收到区块的时候，首先要检查当前区块内每一笔事务的签名（要根据这些事务对应的前一笔事务）。区块既可以包含依赖于先前区块的事务，也可以包含依赖于当前区块的事务。比如，事务 C 可以依赖于同一区块内的事务 B，事务 B 可以依赖于更早区块中的事务 A。

（译者注：比特币的 “币” 的形式是所谓的 “UTXO”，可以形象地理解为支票（其面额是任意的）。而比特币事务的形式是以一个或多个 UTXO 为输入，一个或多个 UTXO 为输出。一个 UTXO 的使用要求（也称解锁要求）是在其作为事务输出时就决定好的。因此节点收到区块之后，要根据事务的输入，找出这些币对应的上一笔事务，以此检查其签名。

如此一来，比特币不仅在区块间会形成明确的链条，币的流转也会形成前后相接的链条。）

> 很抱歉提了这么多问题，不过，就像我刚刚说的，比特币看起来是个很有前景的、原创的想法 ……

感谢您的提问。我确实是倒着做的，我先写好了所有的代码，然后才说服自己能够解决所有问题，然后我才写出那篇论文。我觉得我发布代码的速度应该比我写出一篇更详尽的规范要快。在你设问的地方，你的绝大多数假设都是对的。

中本聪